{% extends "base.html" %}

{% block app_content %}
    <p class="lead">
        <h2 class="h2">User results<br><small>Select a user to see detailed result</small></h2>
    </p>
    <table class="table table-fluid table-hover table-sm">
        <thead>
            <th>User</th>
            <th>SAGF-ID</th>
            <th>Theory</th>
            <th>Practical</th>
        </thead>
        <tbody>
            {% for result in results %}
                <tr data-toggle="collapse" data-target>
                    <td>{{ result.get("name") }}</td>
                    <td>{{ result.get("sagf_id") }}</td>
                    <td>{{ result.get("theory", 0) }} %</td>
                    <td>{{ result.get("practical", 0) }} %</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
        {% for result in results %}
        <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingOne">
                <h4 class="panel-title">
                    <a role="button" data-toggle="collapse" data-parent="#accordion" href="#{{ result.get('sagf_id') }}" aria-expanded="true" aria-controls="{{ result.get('sagf_id') }}">
                        <i class="more-less glyphicon glyphicon-plus"></i>
                        {{ result.get("name") + " (" + result.get("sagf_id")|string + ")" }}
                    </a>
                </h4>
            </div>
            <div id="{{ result.get('sagf_id') }}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="panel-body">
                    <p>
                        Theory result: <strong>{{ result.get("theory", 0) }}%</strong>
                        <br>
                        Missed theory: {{ result.get("theory_missed") }}
                    </p>
                    <p>
                        Pratical result: <strong>{{ result.get("practical") }}</strong>
                        <br>
                        Practical Answers: {{ result.get("practical_answer") }}
                    </p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
{% endblock %}